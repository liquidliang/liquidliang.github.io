{"version":3,"sources":["webpack:///webpack/bootstrap b5cf8f129f7091905841","webpack:///./source/src/index.js","webpack:///./source/src/polyfill/index.js","webpack:///./source/src/polyfill/array.js","webpack:///./source/src/polyfill/set.js","webpack:///./source/src/helper/common_event.js","webpack:///./source/src/common/util/index.js","webpack:///./source/src/common/util/event.js","webpack:///./source/src/helper/notification.js","webpack:///./source/src/model/article.js","webpack:///./source/src/helper/search.js","webpack:///./source/src/helper/sw_post_message.js","webpack:///./source/src/model/config.js","webpack:///./source/src/card/common/navigator.js","webpack:///./source/src/page/list.js","webpack:///./source/src/card/common/footer.js","webpack:///./source/src/card/common/main_container.js","webpack:///./source/src/helper/init_option.js","webpack:///./source/src/card/blog/pannel.js","webpack:///./source/src/card/blog/pannel_list.js","webpack:///./source/src/helper/recommend.js","webpack:///./source/src/model/read_history.js","webpack:///./source/src/card/blog/article_list.js","webpack:///./source/src/page/book.js","webpack:///./source/src/card/common/slidebar_container.js","webpack:///./source/src/page/content.js","webpack:///./source/src/card/blog/content.js","webpack:///./source/src/page/blog.js","webpack:///./source/src/page/search.js","webpack:///./source/src/card/blog/pull_article.js"],"names":["require","m_article","m_config","c_header","c_pageList","c_pageBook","c_pageContent","c_pageBlog","c_pageSearch","viewHeader","$","append","getConfig","then","initArticle","reset","BCD","app","setTitle","str","navLis","find","removeClass","each","i","domLi","url","attr","location","hash","indexOf","addClass","document","title","initPage","key","next","page","html","path","decodeURIComponent","hasBook","hasCatalog","hasArticle","replaceHash","getIndex","Array","from","arr","arr2","length","Set","call","prototype","Object","create","add","data","push","delete","pos","splice","has","size","clear","set","pop","values","window","m_util","go","ele","option","on","e","stopBubble","addEvent","back","history","module","exports","m_event","getTime","date","Date","now","diff","Math","round","getDate","getFullYear","time","formatDate","leftFillString","num","substr","getRandomName","random","toString","replace","_date","performance","stopBubbleEx","stopPropagation","preventDefault","fabPushElement","tipsElement","prev","isPushSupported","Notification","permission","console","log","isSubscribed","val","unsubscribePush","subscribePush","navigator","serviceWorker","ready","registration","pushManager","getSubscription","subscription","changePushStatus","catch","error","subscribe","userVisibleOnly","info","saveSubscriptionID","unsubscribe","deleteSubscriptionID","status","subscription_id","endpoint","split","fetch","method","headers","body","JSON","stringify","user_id","m_search","swPostMessage","catalogList","catalogDict","articleList","articleDict","sidebarList","bookList","bookDict","tagList","startTime","isPreload","sidebarName","getSidebarPath","name","result","item","list","idx","summary","content","setTimeout","editormd","markdownToHTML","markdown","htmlDecode","tocm","emoji","taskList","tex","flowChart","sequenceDiagram","innerHtml","test","baseHash","$0","$1","getName","match","getURL","o","mtime","getPath","pathWithSearch","origin","getSortContent","paragraph","len","minLen","ret","substring","partCount","partIndex","$2","getContent","reg","filter","count","some","lastIndexOf","con","processItem","isRaw","trim","tfList","getTFs","preload","obj","totalList","concat","existDict","forEach","m","init","tagSet","processArticle","isDirectory","tags","slice","href","encodeURIComponent","extend","sort","a","b","processCount","Promise","resolve","ajaxCache","getTagArticles","tag","fetchContent","ajaxList","map","ajax","success","when","apply","getList","parseInt","start","getChildCatalog","catalog","tagLength","every","getCatalogArticles","testItem","testType","searchWeight","titleMatchDict","contentMatchDict","titleMathLength","pow","pointList","point","weight","startPoint","search","contentMathLength","assign","searchList","word","callback","isCommend","getGlobalRegex","fitList","remainList","searchCallback","resultList","table","totalNum","checkNum","searchWord","batchProcess","subList","testObj","searchDirect","getCatalogMessage","getCatalogs","getBooks","getTags","getArticleList","getListByCatalog","getListByTag","getArticleContent","createNGram","n","end","gramDict","getWordList","wordList","processStrict","processChiese","processEnglish","toLowerCase","removeStopWord","threeDict","fourDict","tfDict","token","frequency","wordSet","RegExp","join","index","postMessage","callbackDict","addEventListener","event","cbid","resp","req","controller","state","host","isLocalhost","username","config","searchIssueURL","newIssueURL","update","author","logoTitle","CONFIG","nav","getConfigSync","getNewIssueURL","getSearchIssueURL","viewInput","viewDrop","setView","template","viewGroup","getWord","doSearch","getHash","focus","selectLi","selectList","oldWord","hide","keyCode","css","eq","trigger","show","getData","c_footer","c_mainContainer","m_initOption","c_pannel","c_pannelList","c_articleList","viewBody","viewTop","viewList","viewPannelList","addView","viewFoot","currentHash","hasRender","getCode","notRender","empty","hrefHead","pageNum","isInline","parent","prepend","anchorBack","scrollY","scrollTo","extendState","getPage","view","m_recommend","viewPannelBook","viewPannelCatalog","viewPannelTag","viewPannelRecommendPost","delay","getRecommend","m_readHistory","itemSet","uniqList","currentPath","hasRead","getCorrelation","a_tfList","b_tfList","total","reduce","sum","getSimilarArticles","calModel","weightList","article","getMutiSamples","tagDict","retList","originList","tagName","keys","j","delayTime","keyWords","alist","storageKey","readHistory","parse","localStorage","getItem","addHistory","setItem","getReadTime","s_mainContainer","viewContent","viewSlidebar","slidebar","chapters","fileName","bindEvent","currentDom","c_content","innerHeight","m_pullArticle","container","viewRank","viewTips","full","keyWord"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b5cf8f129f7091905841","/**\n * @file index 入口文件，路由定义\n * @author ljquan@qq.com\n */\n//require(\"babel-polyfill\");  //太大了\nrequire(\"polyfill/\");\nrequire('helper/common_event.js');\nrequire('helper/notification.js');\nconst m_article = require('model/article');\nconst m_config = require('model/config');\nconst c_header = require('card/common/navigator');\nconst c_pageList = require('page/list.js');\nconst c_pageBook = require('page/book.js');\nconst c_pageContent = require('page/content.js');\nconst c_pageBlog = require('page/blog.js');\nconst c_pageSearch = require('page/search.js');\nlet viewHeader = c_header();\n$('body').append(viewHeader);\n\nm_config.getConfig.then(() =>\n  m_article.initArticle.then(() => {\n    viewHeader.reset();\n    BCD.app({ //入口\n      setTitle: function (str) {\n        //viewHeader.reset();\n        let navLis = viewHeader.find('.nav li');\n        navLis.removeClass('active');\n        navLis.each((i, domLi) => {\n          let url = $($(domLi).find('a')[0]).attr('data-url') || '';\n          if (location.hash.indexOf(url) === 0) {\n            $(domLi).addClass('active');\n          }\n        });\n        document.title = str;\n      },\n      initPage: function (key, next) {\n        var page = this;\n        if (key == 'index') {\n          c_pageList(page, key);\n          next();\n        }else if (key == 'subscribe') {\n          page.addClass('text-center').html('<p style=\"margin-top: 100px;\">您的浏览器不支持该特性，请使用最新的Chrome浏览器</p>'+\n           '<button style=\"margin-top: 10px;padding-left: 50px;padding-right: 50px;\"'+\n          ' data-on=\"?m=subscribePush\"'+\n          ' class=\"btn btn-warning btn-lg\">订阅</button>');\n          next();\n        } else if (key == 'tag') {\n          c_pageList(page, key);\n          next();\n        } else if (key == 'blog') {\n          c_pageBlog(page);\n          next();\n        } else if (key == 'search') {\n          c_pageSearch(page, key);\n          next();\n        } else {\n          let path = decodeURIComponent(key);\n          if (m_article.hasBook(path)) {\n            c_pageBook(page, path);\n            return next();\n          } else if (m_article.hasCatalog(path)) {\n            c_pageList(page, path);\n            return next();\n          } else if (m_article.hasArticle(path)) {\n            c_pageContent(page, path);\n            return next();\n          }\n\n          BCD.replaceHash(m_config.getIndex());\n          next(-1);\n        }\n      }\n    });\n  })\n);\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/index.js","require(\"polyfill/array\");\r\nrequire(\"polyfill/set\");\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/polyfill/index.js","if (!Array.from) {\r\n  Array.from = function (arr) {\r\n    for (var i = 0, arr2 = []; i < arr.length; i++) {\r\n      arr2[i] = arr[i];\r\n    }\r\n    return arr2;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/polyfill/array.js","if(typeof Set != 'function'){\r\n\r\n    var Set = function(){\r\n        Array.call(this);\r\n    }\r\n\r\n    Set.prototype = Object.create(Array.prototype);\r\n\r\n\r\n    // 集合添加元素\r\n    Set.prototype.add = function(data) {\r\n        if(this.indexOf(data) < 0){\r\n            this.push(data);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // 删除集合中的元素\r\n    Set.prototype.delete = function(data) {\r\n        var pos = this.indexOf(data);\r\n        if(pos > -1){\r\n            this.splice(pos,1);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // 判断集合是否包括元素\r\n    Set.prototype.has = function(data) {\r\n        if(this.indexOf(data) > -1){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    // 获取集合的大小\r\n    Set.prototype.size = function() {\r\n        return this.length;\r\n    }\r\n\r\n    // 清除set集合。\r\n    Set.prototype.clear = function(set) {\r\n        while(this.pop());\r\n    }\r\n\r\n    Set.prototype.values = function(){\r\n        return\r\n    }\r\n    window.Set = Set;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/polyfill/set.js","const m_util = require('common/util')\r\n//data-on=\"?m=go\" data-url=\"<%=o.href%>\"\r\nconst go = (ele, option, data)=>{\r\n  ele.on('click', function(e){\r\n    BCD.go(ele.data('url'));\r\n    m_util.stopBubble(e);\r\n  })\r\n};\r\nBCD.addEvent('go', go);\r\n//data-on=\"?m=back\"\r\nconst back = (ele, option, data)=>{\r\n  ele.on('click', function(e){\r\n    history.back();\r\n    m_util.stopBubble(e);\r\n  })\r\n};\r\nBCD.addEvent('back', back);\r\n\r\nconst replaceHash = (ele, option, data)=>{\r\n  ele.on('click', function(e){\r\n    BCD.replaceHash(ele.data('url'));\r\n    m_util.stopBubble(e);\r\n  })\r\n};\r\nBCD.addEvent('replaceHash', replaceHash);\r\n//事件绑定\r\nmodule.exports = {\r\n  go,\r\n  back,\r\n  replaceHash\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/helper/common_event.js","const m_event = require('./event');\r\nconst getTime = function(date) {\r\n  date = new Date(date);\r\n  var now = new Date();\r\n  var diff = now - date;\r\n  switch (true) {\r\n    case diff < 6E4:\r\n      return '刚刚';\r\n    case diff < 36E5:\r\n      return Math.round(diff / 6E4) + '分钟前';\r\n    case diff < 864E5:\r\n      return Math.round(diff / 36E5) + '小时前';\r\n    case diff < 1728E5 && now.getDate() - date.getDate() != 2:\r\n      return '昨天';\r\n    case date.getFullYear() === new Date().getFullYear():\r\n      return BCD.time.formatDate(date, \"%M月%d日\");\r\n    default:\r\n      return BCD.time.formatDate(date, \"%y年%M月%d日\");\r\n  }\r\n};\r\n\r\nconst leftFillString = function(num, length) {\r\n  return (\"0000000000\" + num).substr(-length);\r\n};\r\nconst getRandomName = function() {\r\n  return (\"aaaaaaaaaa\" + Math.random().toString(36).replace(/[.\\d]/g, '')).substr(-10)\r\n};\r\n\r\n//https://developers.google.com/web/tools/lighthouse/audits/date-now\r\nlet _date = window.performance || Date;\r\nmodule.exports = {\r\n  getTime,\r\n  leftFillString,\r\n  getRandomName,\r\n  stopBubble: m_event.stopBubble,\r\n  stopBubbleEx: m_event.stopBubbleEx,\r\n  now: function(){\r\n      return _date.now();\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/common/util/index.js","/**\r\n * @module {Object} event  事件相关的处理函数\r\n * @return {object} 方法集合\r\n * @property {function} stopBubble 停止冒泡并禁止默认事件\r\n * @property {function} stopBubbleEx 停止冒泡\r\n * @author ljquan@qq.com\r\n */\r\n\r\nmodule.exports = {\r\n    /**\r\n     * 停止冒泡并禁止默认事件\r\n     * @param  {event} e 事件\r\n     * @return {null}\r\n     */\r\n    stopBubble: function(e) {\r\n        if (e && e.stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n        e.preventDefault();\r\n    },\r\n    /**\r\n     * 停止冒泡\r\n     * @param  {event} e 事件\r\n     * @return {null}\r\n     */\r\n    stopBubbleEx: function(e) {\r\n        if (e && e.stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/common/util/event.js","BCD.addEvent('subscribePush', function (fabPushElement) {\r\n  //Push notification button\r\n  var tipsElement = fabPushElement.prev();\r\n  //To check `push notification` is supported or not\r\n  var isPushSupported = function () {\r\n    //To check `push notification` permission is denied by user\r\n    if (!window.Notification || Notification.permission === 'denied') {\r\n      console.log('User has blocked push notification.');\r\n      return;\r\n    }\r\n\r\n    //Check `push notification` is supported or not\r\n    if (!('PushManager' in window)) {\r\n      console.log('Sorry, Push notification isn\\'t supported in your browser.');\r\n      return;\r\n    }\r\n    //Click event for subscribe push\r\n    fabPushElement.on('click', function () {\r\n      var isSubscribed = (fabPushElement.val() === 'true');\r\n      if (isSubscribed) {\r\n        unsubscribePush();\r\n      } else {\r\n        subscribePush();\r\n      }\r\n    });\r\n    //Get `push notification` subscription\r\n    //If `serviceWorker` is registered and ready\r\n    navigator.serviceWorker.ready\r\n      .then(function (registration) {\r\n        registration.pushManager.getSubscription()\r\n          .then(function (subscription) {\r\n            //If already access granted, enable push button status\r\n            //Tell application server to delete subscription\r\n            if (subscription) {\r\n              changePushStatus(true);\r\n            } else {\r\n              changePushStatus(false);\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            console.error('Error occurred while enabling push ', error);\r\n          });\r\n      });\r\n  }\r\n\r\n  // Ask User if he/she wants to subscribe to push notifications and then\r\n  // ..subscribe and send push notification\r\n  function subscribePush() {\r\n    navigator.serviceWorker.ready.then(function (registration) {\r\n      if (!registration.pushManager) {\r\n        console.log('Your browser doesn\\'t support push notification.');\r\n        return false;\r\n      }\r\n\r\n      //To subscribe `push notification` from push manager\r\n      registration.pushManager.subscribe({\r\n          userVisibleOnly: true //Always show notification when received\r\n        })\r\n        .then(function (subscription) {\r\n          console.info('Push notification subscribed.');\r\n          console.log(subscription);\r\n          saveSubscriptionID(subscription);\r\n          changePushStatus(true);\r\n        })\r\n        .catch(function (error) {\r\n          changePushStatus(false);\r\n          console.error('Push notification subscription error: ', error);\r\n        });\r\n    })\r\n  }\r\n\r\n  // Unsubscribe the user from push notifications\r\n  function unsubscribePush() {\r\n    navigator.serviceWorker.ready\r\n      .then(function (registration) {\r\n        //Get `push subscription`\r\n        registration.pushManager.getSubscription()\r\n          .then(function (subscription) {\r\n            //If no `push subscription`, then return\r\n            if (!subscription) {\r\n              console.log('Unable to unregister push notification.');\r\n              return;\r\n            }\r\n\r\n            //Unsubscribe `push notification`\r\n            subscription.unsubscribe()\r\n              .then(function () {\r\n                console.info('Push notification unsubscribed.');\r\n                console.log(subscription);\r\n                deleteSubscriptionID(subscription);\r\n                changePushStatus(false);\r\n              })\r\n              .catch(function (error) {\r\n                console.error(error);\r\n              });\r\n          })\r\n          .catch(function (error) {\r\n            console.error('Failed to unsubscribe push notification.');\r\n          });\r\n      })\r\n  }\r\n\r\n  //To change status\r\n  function changePushStatus(status) {\r\n    fabPushElement.val(status);\r\n    if (status) {\r\n      tipsElement.html('您未订阅，订阅后您将可以收到更新提示');\r\n      fabPushElement.removeClass('btn-warning').addClass('btn-success').html('订阅');\r\n    } else {\r\n      tipsElement.html('您已订阅，取消订阅后您将收不到更新提示！');\r\n      fabPushElement.removeClass('btn-success').addClass('btn-warning').html('取消订阅');\r\n    }\r\n  }\r\n\r\n\r\n  function saveSubscriptionID(subscription) {\r\n    var subscription_id = subscription.endpoint.split('gcm/send/')[1];\r\n\r\n    console.log(\"Subscription ID\", subscription_id);\r\n\r\n    fetch(' http://119.29.150.243:3333/api/users', {\r\n      method: 'post',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        user_id: subscription_id\r\n      })\r\n    });\r\n  }\r\n\r\n  function deleteSubscriptionID(subscription) {\r\n    var subscription_id = subscription.endpoint.split('gcm/send/')[1];\r\n\r\n    fetch(' http://119.29.150.243:3333/api/user/' + subscription_id, {\r\n      method: 'delete',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  }\r\n\r\n  isPushSupported(); //Check for push notification support\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/helper/notification.js","const m_util = require('common/util/index');\nconst m_search = require('helper/search');\nconst swPostMessage = require('helper/sw_post_message.js');\nlet catalogList = []; //目录列表\nlet catalogDict = {};\nlet articleList = []; //文件列表\nlet articleDict = {};\nlet sidebarList = []; //sidebar文件列表(sidebar文件也可以在articleDict中索引到)\nlet bookList = []; //书籍列表\nlet bookDict = {};\nlet tagList = [];\nlet startTime = m_util.now();\nlet isPreload = false;\nconst sidebarName = '$sidebar$';\nconst getSidebarPath = (path) => path + '/' + sidebarName + '.md';\n\nBCD.addEvent('mkview', function (ele, option, data) {\n  let name = m_util.getRandomName();\n  let result;\n  if ('idx' in option) {\n    let item = data.list[option.idx];\n    result = item.summary;\n    if (result.length < item.content.length) {\n      result += '...';\n    }\n  } else {\n    result = data.content;\n  }\n\n  ele.attr('id', name);\n  setTimeout(function () { //dom元素展示出来之后再绑定，不然流程图等会有样式问题\n    editormd.markdownToHTML(name, {\n      markdown: result, //+ \"\\r\\n\" + $(\"#append-test\").text(),\n      // htmlDecode: true, // 开启 HTML 标签解析，为了安全性，默认不开启\n      htmlDecode: \"style,script,iframe\", // you can filter tags decode\n      //toc             : false,\n      tocm: true, // Using [TOCM]\n      //tocContainer    : \"#custom-toc-container\", // 自定义 ToC 容器层\n      //gfm             : false,\n      //tocDropdown     : true,\n      // markdownSourceCode : true, // 是否保留 Markdown 源码，即是否删除保存源码的 Textarea 标签\n      emoji: true,\n      taskList: true,\n      tex: true, // 默认不解析\n      flowChart: true, // 默认不解析\n      sequenceDiagram: true // 默认不解析\n    });\n\n    let innerHtml = ele.html();\n    if(/(<br>|<p><\\/p>){2,}/.test(innerHtml)){\n      ele.html(innerHtml.replace(/(<br>|<p><\\/p>){2,}/, ''));\n    }\n\n    if (result.indexOf('[TOC]') > -1 && location.hash.indexOf('.md') > 0) { //兼容TOC目录\n      let baseHash = location.hash.replace(/\\.md\\/.*/, '.md');\n      ele.html(ele.html()\n        .replace(/href=\"#([^\"]*)/g, function ($0, $1) {\n          if ($1) {\n            return 'href=\"' + baseHash + '/' + $1;\n          }\n          return $0\n        }).replace(/name=\"([^\"]*)/g, function ($0, $1) {\n          if ($1) {\n            return 'name=\"' + baseHash.substr(1) + '/' + $1;\n          }\n          return $0\n        }));\n    }\n    $('a[href^=\"http\"]').attr('target', '_blank');\n    $('a[href^=\"http\"]').attr('rel', 'noopener');\n  }, 0);\n});\n\nconst getName = (path) => {\n  let arr = path.match(/\\/([^/.]+)[.\\w-_]+$/);\n  return arr ? arr[1] : '';\n}\n\nconst getURL = (o) => o.path + '?mtime=' + o.mtime;\n\nconst getPath = (pathWithSearch) => decodeURIComponent(pathWithSearch.replace(location.origin + '/', '').replace(/\\?[^?]+/, ''));\n\n\nconst getSortContent = (content, paragraph = 10) => {\n  let len = 500;\n  let minLen = len / 2;\n  let ret = content.substring(0, len);\n  let partCount = 0;\n  let partIndex = 0;\n  ret.replace(/([^\\n]*)(\\n|<br>|<\\/p>)/g, function ($0, $1, $2, idx) {\n    partCount++;\n    if (partCount > paragraph && $1.length > 10 && partIndex === 0) {\n      partIndex = idx;\n    }\n    if (partCount == 15 && partIndex === 0) {\n      partIndex = idx;\n    }\n  });\n  if (partIndex > 0) {\n    ret = ret.substring(0, partIndex);\n    if (ret.length < len * 0.7) {\n      return ret;\n    }\n  }\n  let getContent = (str, reg) => {\n    let arr = str.split(reg).filter(o => !!o);\n    let count = 0;\n    if (arr && arr.length > 2) {\n      let idx = arr.length - 1;\n      if (arr.some((o, i) => {\n          count += o.length;\n          if (count > minLen && i > 1) {\n            idx = i;\n            return true;\n          }\n        })) {\n        return str.substr(0, str.lastIndexOf(arr[idx])).replace(/[#\\s]+$/, '');\n      }\n      return str;\n    }\n  }\n  let con = getContent(ret, /\\s*#+\\s*/);\n  if (con) {\n    return con;\n  }\n  con = getContent(ret, /\\s+/);\n  if (con) {\n    return con;\n  }\n  return ret;\n}\n\nconst processItem = (item, content)=>{\n  if(item.title==sidebarName){\n    item.content = content;\n    return item;\n  }\n  let isRaw = true;\n  // let start = content.indexOf('---');\n  // if(start>-1){\n  //   let end;\n  //   if(start===0){\n  //     start = start+3;\n  //     end = content.substring(start).indexOf('---') + start;\n  //   }else{\n  //     end = start;\n  //     start = 0;\n  //   }\n  //   let arr = content.substring(start, end).match(/([^:\\n]+:[^\\n]+)/g);\n  //   if(arr){\n  //     let attrDict = {};\n  //     arr.forEach(function(o){\n  //       let point = o.indexOf(':');\n  //       attrDict[o.substring(0, point)] = o.substring(point+1);\n  //     });\n  //     item.title = attrDict.title || item.title;\n  //     isRaw = false;\n  //     content = content.substring(end+3).trim();\n  //     if(attrDict.dest_url){\n  //       content = '链接：['+attrDict.dest_url+']('+attrDict.dest_url+')'\n  //     }\n  //   }\n  // }\n  if(isRaw){\n    let arr = content.match(/^[\\s]*#[^\\n\\(]+[\\n]/);\n    if(arr){\n     let title = arr[0];\n     item.title = title.replace(/[#\\s]+/, '').trim();\n     content = content.replace(title, '');\n     isRaw = false;\n    }\n  }\n\n  item.content = content;// = (content || '').replace(/^[\\s]*---[-]*/, '');\n  item.tfList = m_search.getTFs(content);\n  item.summary = getSortContent(content);\n  return item;\n};\n\nconst preload = (obj) => {\n  let count = 0;\n  for (var pathWithSearch in obj) {\n    let path = getPath(pathWithSearch);\n    let item;\n    if (item = articleDict[path]) {\n      count++;\n      processItem(item, obj[pathWithSearch]);\n    }\n  }\n  let totalList = sidebarList.concat(articleList);\n  let existDict = {};\n  totalList.forEach(o => {\n    existDict[location.origin + '/' + o.path] = 1;\n  });\n\n  swPostMessage({\n    m: 'delete_not_exist_article',\n    data: existDict\n  });\n\n\n  if (isPreload) {\n    if (count) {\n      console.log('文章同步成功（' + count + '篇）！可以离线使用');\n    } else {\n      console.log('文章同步成功!（无更新内容）');\n    }\n    return false;\n  } else {\n    isPreload = true;\n    console.log('本地文章加载成功（' + count + '/' + (articleList.length + sidebarList.length) + '个文件）');\n  }\n  return true;\n};\n\nconst init = (list) => {\n  catalogList = []; //目录列表\n  articleList = []; //文件列表\n  sidebarList = [];\n  bookList = [];\n  let tagSet = new Set();\n  let processArticle = (o) => {\n    let {\n      path = '', mtime\n    } = o;\n    if (o.isDirectory) {\n      let tags = path.split('/').slice(1);\n      tags.forEach(o => tagSet.add(o));\n      let item = {\n        path,\n        time: m_util.getTime(mtime),\n        href: '#!/' + encodeURIComponent(o.path),\n        title: path.slice(path.lastIndexOf('/') + 1),\n        tagList: tags\n      };\n      catalogList.push(item);\n    } else {\n      let tags = path.split('/').slice(1, -1);\n      tags.forEach(o => tagSet.add(o));\n      let item = {\n        path,\n        mtime,\n        href: '#!/' + encodeURIComponent(o.path),\n        title: getName(path),\n        time: m_util.getTime(mtime),\n        tagList: tags\n      };\n      if (articleDict[path]) {\n        item = $.extend(articleDict[path], item);\n      } else {\n        articleDict[path] = item;\n      }\n      articleList.push(item);\n    }\n  };\n  list.forEach(processArticle);\n  articleList = articleList.filter(o => {\n    if (o.title == sidebarName) {\n      sidebarList.push(o);\n      return false;\n    }\n    return true;\n  });\n  catalogList = catalogList.filter(o => {\n    if (articleDict[getSidebarPath(o.path)]) {\n      bookDict[o.path] = o;\n      bookList.push(o);\n      return false;\n    }\n    catalogDict[o.path] = o;\n    return true;\n  });\n  articleList = articleList.sort((a, b) => {\n    return b.mtime - a.mtime;\n  });\n  tagList = [...tagSet];\n};\n\nlet processCount = 0;\n//先用缓存，请求回来再更新\nconst initArticle = new Promise((resolve) => {\n  BCD.ajaxCache('./json/article.json', (data) => {\n    init(data);\n    processCount++;\n    // if (processCount === 2) { //如果网络请求失败，这里不会被执行\n    //   let totalList = sidebarList.concat(articleList);\n    //   swPostMessage({\n    //     m: 'preloadAtricle',\n    //     data: totalList.map(getURL)\n    //   }, preload);\n    // }\n    resolve();\n    return 1; //缓存数据到localStorage\n  }, 0, 1E3, true);\n});\n\n//获取包含相关tag文章列表\nconst getTagArticles = (tag) => {\n  if (tag) {\n    return articleList.filter(o => o.tagList &&\n      o.tagList.indexOf(tag) > -1);\n  }\n  return articleList;\n};\n\nconst fetchContent = (list) => {\n  let ajaxList = list.filter(o => articleDict[o.path] && !articleDict[o.path].content).map(o => $.ajax({\n    url: getURL(o),\n    success(str) {\n      articleDict[o.path] = processItem(o, str);\n    }\n  }));\n  return new Promise(function (resolve) {\n    $.when.apply(this, ajaxList).then(resolve, resolve);\n  });\n};\n\n\nconst getList = (method) => (tag, page = 0, count = 10) => {\n  page = parseInt(page || 0);\n  let start = page * count;\n  let totalList = method(tag);\n  let list = totalList.slice(start, start + count);\n  return fetchContent(list).then(() => {\n    return {\n      tag,\n      page,\n      count,\n      num: totalList.length,\n      list: list.map(o => articleDict[o.path]).filter(o => !!(o && o.content))\n    };\n  });\n};\n\nconst getChildCatalog = (path) => {\n  let catalog = catalogDict[path];\n  if (catalog) {\n    let tagList = catalog.tagList;\n    let tagLength = tagList.length + 1;\n    return bookList.concat(catalogList).filter(o => o.tagList.length &&\n      tagList.every((tag, i) => o.tagList.length == tagLength && tag == o.tagList[i]));\n  }\n  return [];\n};\n\nconst getCatalogArticles = (path) => {\n  let catalog = catalogDict[path];\n  if (catalog) {\n    let tagList = catalog.tagList;\n    return articleList.filter(o => o.tagList.length &&\n      tagList.every((tag, i) => tag == o.tagList[i])).sort((a, b) => a.tagList.length - b.tagList.length);\n  }\n  return [];\n};\n\nconst testItem = (reg, item) => {\n  let testType = 0;\n  let obj = {};\n  let searchWeight = 0;\n  let titleMatchDict = {};\n  let contentMatchDict = {};\n  if (reg.test(item.title)) {\n    obj.title = item.title.replace(reg, function ($0) {\n      if (titleMatchDict[$0]) {\n        titleMatchDict[$0] ++;\n      }else{\n        titleMatchDict[$0] = 1;\n      }\n      return '<span class=\"text-danger\">' + $0 + '</span>';\n    });\n    testType += 1;\n    let titleMathLength = 0;\n    for (var key in titleMatchDict) {\n      titleMathLength += /\\w/.test(key) ? titleMatchDict[key] : Math.pow(1.6, key.length-1) * titleMatchDict[key];\n    }\n    searchWeight += titleMathLength / item.title.length;\n  }\n  if (item.content && reg.test(item.content)) {\n    let pointList = [];\n    obj.content = item.content.replace(reg, function ($0, point) {\n      if (contentMatchDict[$0]) {\n        contentMatchDict[$0]++;\n      } else{\n        contentMatchDict[$0] = 1;\n      }\n      let weight = /\\w/.test($0) ? 2 : $0.length;\n      pointList.push({\n        point,\n        weight\n      });\n      return '<font color=#a94442>' + $0 + '</font>';\n    });\n    pointList = pointList.sort((a, b) => b.weight - a.weight);\n    let startPoint = pointList[0].point;\n    let start = startPoint - 30;\n    let summary = item.content.substr(start < 0 ? 0 : start);\n    start = summary.search(/[。\\n\\r]/);\n    if (start < startPoint) {\n      summary = getSortContent(summary.substr(start).replace(/^[。\\s]*/, ''), 5);\n    } else {\n      summary = getSortContent(summary.replace(/^[。\\s]*/, ''), 5);\n    }\n    obj.summary = summary.replace(reg, function ($0) {\n      return '<font color=#a94442>' + $0 + '</font>';\n    });\n    testType += 2;\n    let contentMathLength = 0;\n\n    for (var key in contentMatchDict) {\n      contentMathLength += /\\w/.test(key) ? contentMatchDict[key] : Math.pow(1.6, key.length-1) * contentMatchDict[key];\n    }\n    searchWeight += contentMathLength / Math.pow(item.content.length, 0.6);\n  }\n  obj.testType = testType;\n/*******calculate search weight**********/\n\n  obj.searchWeight = searchWeight;\n  return Object.assign({}, item, obj);\n};\n\n\nconst searchList = (word, callback, isCommend = false) => {\n  let reg = m_search.getGlobalRegex(word);\n  let fitList = [];\n  let remainList = [];\n  let ajaxList = [];\n  let totalList = articleList.filter(o => o);\n\n  const searchCallback = (list) => {\n    let resultList = list.filter(o => o.testType > 0).sort((a, b) => {\n      let ret = b.searchWeight - a.searchWeight;\n      if(ret===0){\n        return b.content.length - a.content.length + (b.mtime - a.mtime) / 1E5;\n      }\n      return ret;\n    });\n    if (resultList.length || list.length >= totalList.length) {\n      console.table(resultList.map(o => {\n        return {\n          path: o.path,\n          searchWeight: o.searchWeight\n        };\n      }));\n    }\n    callback({\n      totalNum: totalList.length,\n      checkNum: list.length,\n      searchWord: word,\n      list: resultList\n    });\n  };\n  const batchProcess = (list, next) => {\n    let subList = list.splice(0, 10);\n    fetchContent(subList).then(() => {\n      searchCallback(subList.map(o => testItem(reg, articleDict[o.path])));\n      if (list.length) {\n        batchProcess(list, next);\n      } else if (next) {\n        next();\n      }\n    })\n  };\n  totalList.forEach(o => {\n    let item = articleDict[o.path];\n    if (item) {\n      let testObj = testItem(reg, item);\n      if (item.content) {\n        fitList.push(testObj);\n      } else if (testObj.testType > 0) {\n        ajaxList.push(item);\n      } else {\n        remainList.push(o);\n      }\n    }\n  });\n  if (isCommend) {\n    return callback(ajaxList.concat(fitList).filter(o => o.testType > 0).sort((a, b) => b.searchWeight - a.searchWeight));\n  }\n  searchCallback(fitList);\n  batchProcess(ajaxList, function () {\n    batchProcess(remainList);\n  })\n  return remainList;\n};\n\n\n\n//搜索直达\nconst searchDirect = (word) => {\n  let reg = m_search.getGlobalRegex(word);\n  return articleList.filter(o => reg.test(o.title)).map(o => {\n    let weight = 0;\n    let item = {\n      href: o.href,\n      title: o.title.replace(reg, function ($0) {\n        weight += $0.length;\n        return '<span class=\"text-danger\">' + $0 + '</span>';\n      })\n    };\n    item.weight = weight\n    return item;\n  }).sort((a, b)=>b.weight - a.weight);\n};\n\n\nmodule.exports = {\n  getName,\n  isPreload,\n  startTime,\n  initArticle,\n  catalogDict,\n  articleDict,\n  hasCatalog: (path) => !!catalogDict[path],\n  hasArticle: (path) => !!articleDict[path],\n  hasBook: (path) => !!bookDict[path],\n  getCatalogMessage: (path) => catalogDict[path],\n  getCatalogs: () => catalogList,\n  getBooks: () => bookList,\n  getTagArticles,\n  getTags: () => tagList,\n  getSidebarPath,\n  getArticleList: () => articleList.map(o => articleDict[o.path]),\n  getListByCatalog: getList(getCatalogArticles),\n  getChildCatalog,\n  getListByTag: getList(getTagArticles),\n  getArticleContent: (path) => fetchContent([articleDict[path]])\n    .then(() => articleDict[path]),\n  searchDirect,\n  searchList\n};\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/model/article.js","const createNGram = (n) => (str) => {\r\n  let arr = [];\r\n  let end = str.length - n + 1;\r\n  for (var i = 0; i < end; i++) {\r\n    arr.push(str.substr(i, n));\r\n  }\r\n  return arr;\r\n}\r\n\r\nconst gramDict = {\r\n  4: createNGram(4),\r\n  3: createNGram(3),\r\n  2: createNGram(2)\r\n};\r\n\r\nconst getWordList = (str = '') => {\r\n  let wordList = [str];\r\n  let processStrict = (str) => str.replace(/['‘’][^'‘’]*['‘’]|[\"”“][^\"”“]*[\"”“]/g, function($0) {\r\n    wordList.push($0.replace(/['‘’\"”“]/g, ''));\r\n    return ' ';\r\n  });\r\n\r\n\r\n  let processChiese = (str) => str.replace(/[\\u4e00-\\u9fff\\uf900-\\ufaff]+/g, function($0) {\r\n    wordList.push($0);\r\n    for (var i = 4; i > 1; i--) {\r\n      if ($0.length > i) {\r\n        wordList.push.apply(wordList, gramDict[i]($0));\r\n      }\r\n    }\r\n    return ' ';\r\n  });\r\n\r\n  let processEnglish = (str) => {\r\n    wordList.push.apply(wordList,\r\n      str.split(/[^a-zA-Z]/)\r\n      .filter(o => o.length > 2)\r\n      .map(o => o.toLowerCase()));\r\n  };\r\n\r\n  processEnglish(processChiese(processStrict(str)));\r\n  //console.log('search RegExp', new RegExp(wordList.join('|'), 'ig'));\r\n  return wordList;\r\n};\r\n\r\nconst removeStopWord = (str) => {\r\n  str = str.replace(/\\s*```([^`\\n\\r]*)[^`]*```\\s*/g, function($0, $1){return ' '+$1+' ';}); //去掉代码\r\n  str = str.replace(/<[^\\u4e00-\\u9fff\\uf900-\\ufaff>]+>|\\([^\\u4e00-\\u9fff\\uf900-\\ufaff)]+\\)|\\w+[:@][\\w.?#=&\\/]+/g, ' ');//去掉html标签及超链接\r\n  str = str.replace(/怎么|的|是|开始|很多|我|觉得|非常|可以|一|了|上面|下面|这|那|哪|个|this|return|with/g, ' '); //去停用词\r\n  str = str.replace(/[^\\u4e00-\\u9fff\\uf900-\\ufaff\\w]/g, ' '); //非中文或英文，替换成空格\r\n  return str;\r\n}\r\n\r\nconst getTFs = (str = '') => {\r\n  let wordList = getWordList(removeStopWord(str)).slice(1);\r\n  let threeDict = {};\r\n  let fourDict = {};\r\n  let tfDict = {};\r\n  let tfList = [];\r\n\r\n  wordList.forEach(o => {\r\n    if (o.length < 2) {\r\n      return;\r\n    }\r\n    if (tfDict[o]) {\r\n      tfDict[o]++;\r\n    } else {\r\n      if (o.length == 3) {\r\n        threeDict[o] = 1;\r\n      }\r\n      if (o.length == 4) {\r\n        fourDict[o] = 1;\r\n      }\r\n      tfDict[o] = 1;\r\n    }\r\n  });\r\n  var token;\r\n  //去掉非词\r\n  for (token in fourDict) {\r\n    let frequency = tfDict[token];\r\n    gramDict[3](token).forEach(o => {\r\n      if (frequency === tfDict[o]) {\r\n        delete tfDict[o];\r\n        delete threeDict[o];\r\n        gramDict[2](o).forEach(item => {\r\n          if (frequency === tfDict[item]) {\r\n            delete tfDict[item];\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n  for (token in threeDict) {\r\n    let frequency = tfDict[token];\r\n    gramDict[2](token).forEach(o => {\r\n      if (frequency === tfDict[o]) {\r\n        delete tfDict[o];\r\n      }\r\n    });\r\n  }\r\n\r\n  for (token in tfDict) {\r\n    tfList.push({\r\n      token,\r\n      frequency: tfDict[token]\r\n    });\r\n  }\r\n  return tfList.sort((a, b) => b.frequency - a.frequency);//.slice(0,10).map(o=>o.token);\r\n}\r\n\r\nmodule.exports = {\r\n  getWordList,\r\n  getTFs,\r\n  getGlobalRegex: (str) => {\r\n    let wordSet = new Set(getWordList(str));\r\n    let wordList = [...wordSet];\r\n    return new RegExp(wordList.join('|'), 'ig');\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/helper/search.js","const m_util = require('common/util');\r\n\r\nlet index = 0;\r\nlet postMessage = function(){};\r\nlet callbackDict = {};\r\n\r\nif (navigator.serviceWorker) {\r\n  navigator.serviceWorker.addEventListener('message', function(event) {\r\n    let {cbid, resp} = event.data;\r\n    if(cbid && callbackDict[cbid]){\r\n      if(!callbackDict[cbid](resp)){\r\n        delete callbackDict[cbid];\r\n      }\r\n    }\r\n  }); //页面通过监听service worker的message事件接收service worker的信息\r\n  postMessage = function(req, callback){\r\n    if(navigator.serviceWorker.controller && navigator.serviceWorker.controller.state=='activated'){\r\n      index++;\r\n      let obj = {\r\n        m: req.m,\r\n        data: req.data\r\n      };\r\n      if(callback){\r\n        obj.cbid = m_util.getRandomName() + index;\r\n        callbackDict[obj.cbid] = callback;\r\n      }\r\n      navigator.serviceWorker.controller.postMessage(obj);  //页面向service worker发送信息\r\n    }\r\n  }\r\n}\r\n\r\n\r\nmodule.exports = postMessage;//postMessage(message, callback)\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/helper/sw_post_message.js","let arr = location.host.split(\".\");\r\nlet isLocalhost = arr.length === 1;\r\nlet username = isLocalhost ? \"swblog\" : arr[0];\r\nlet config = {\r\n  \"author\": username,\r\n  \"nav\": [\r\n    [\"Home\", \"#!/index\"],\r\n    [\"About\", \"#!/blog/about.md\"]\r\n  ]\r\n};\r\nlet searchIssueURL;\r\nlet newIssueURL;\r\n\r\nconst update = ()=>{\r\n  let author = config.author;\r\n  config.logoTitle = config.logoTitle || author+\"的博客\";\r\n  searchIssueURL = 'https://github.com/'+author+'/'+author+'.github.io/issues?utf8=%E2%9C%93&q=';\r\n  newIssueURL = 'https://github.com/' +author+'/'+author+'.github.io/issues/new?title=';\r\n  if(window.CONFIG){\r\n    CONFIG.username = username = config.author;\r\n  }\r\n};\r\nupdate();\r\n\r\n//先用缓存，请求回来再更新\r\nconst getConfig = new Promise((resolve)=>{\r\n  BCD.ajaxCache('./json/config.json', (data) => {\r\n    config = data || config;\r\n    if(config.author){\r\n      update();\r\n      resolve();\r\n      return 1; //缓存数据到localStorage\r\n    }\r\n    resolve();\r\n  }, 0, 1E3, true);\r\n});\r\n\r\n\r\n\r\n\r\nwindow.CONFIG = module.exports = {\r\n  username,\r\n  getIndex: ()=> config.nav && config.nav[0] && config.nav[0][1] || \"\",\r\n  isLocalhost,\r\n  getConfigSync: () => config,\r\n  getConfig,\r\n  getNewIssueURL: (title)=> newIssueURL + decodeURIComponent(isLocalhost ? \"localhost测试评论\" : title),\r\n  getSearchIssueURL: (title)=> newIssueURL + decodeURIComponent(isLocalhost ? \"localhost测试评论\" : title)\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/model/config.js","const m_util = require('common/util');\r\nconst m_article = require('model/article');\r\nconst m_config = require('model/config');\r\n\r\n\r\nBCD.addEvent('navigator_search', function(ele){\r\n  ele.html('<div class=\"form-group open\">'+\r\n  '  <input type=\"text\" class=\"form-control\" placeholder=\"Search\">'+\r\n  '  <ul class=\"dropdown-menu\" style=\"right:auto;display:none\"></ul>'+\r\n  '</div>'+\r\n  '<button type=\"submit\" class=\"btn btn-primary\">Submit</button>');\r\n  let viewInput = ele.find('input');\r\n  let viewDrop = ele.find('ul').setView({\r\n    template:'<%(obj||[]).forEach(function(o){%>'+\r\n    '<li data-on=\"?m=go\" data-url=\"<%=o.href%>\"><a><%=o.title%></a></li>'+ //\r\n    '<%})%>'\r\n  });\r\n\r\n  let viewGroup = ele.find('.form-group');\r\n  const getWord = ()=> viewInput.val().trim();\r\n  const doSearch = ()=>{\r\n    let hash = '#!/search/'+encodeURIComponent(getWord());\r\n    if(BCD.getHash(0)=='search'){\r\n      BCD.replaceHash(hash);\r\n    }else{\r\n      BCD.go(hash);\r\n    }\r\n    setTimeout(function(){\r\n      viewInput[0].focus(); //延时才能自动focus\r\n    }, 300);\r\n  };\r\n  ele.find('button').on('click', function(e){\r\n    m_util.stopBubble(e);\r\n    let word = getWord();\r\n    if(word){\r\n      doSearch();\r\n    }\r\n  });\r\n  let selectLi = null;\r\n  let selectList = null;\r\n  let index = -1;\r\n  let oldWord = '';\r\n  viewInput.on('blur', function(){\r\n    setTimeout(function(){\r\n      viewDrop.hide();\r\n    }, 200);\r\n  });\r\n  ele.on('keydown', function(e){//上下选择\r\n    if(selectList &&(e.keyCode==40 || e.keyCode==38)){\r\n\r\n      if(e.keyCode==40){\r\n        index++;\r\n        if(index >= selectList.length){\r\n          index = 0;\r\n        }\r\n      }\r\n      if(e.keyCode==38){\r\n        index--;\r\n        if(index <= -selectList.length){\r\n          index = 0;\r\n        }\r\n      }\r\n      selectList.css('background-color','');\r\n      selectLi = selectList.eq(index);\r\n      selectLi.css('background-color','#b2d8fa');\r\n    }\r\n  });\r\n\r\n  ele.on('keyup', function(e){ //keypress要慢一拍 keypress input keyup\r\n    let word = getWord();\r\n    if(word){\r\n      if(e.keyCode==32){\r\n        return doSearch();\r\n      }\r\n      if(e.keyCode==13){\r\n        if(selectLi){\r\n          selectLi.trigger('click');\r\n        }else{\r\n          doSearch();\r\n        }\r\n      }\r\n\r\n      if(word==oldWord){\r\n        return viewDrop.show();\r\n      }\r\n      oldWord = word;\r\n      let list = m_article.searchDirect(word);\r\n      if(list.length){\r\n        index = -1;\r\n        selectLi = null;\r\n        viewDrop.reset(list);\r\n        selectList = viewDrop.find('li');\r\n      }\r\n    }else{\r\n      viewDrop.hide();\r\n    }\r\n  });\r\n})\r\n\r\n\r\n //顶部导航\r\nmodule.exports = function(option) {\r\n  let viewHeader = $('<header class=\"navbar navbar-inverse navbar-fixed-top bs-docs-nav\" role=\"banner\"></header>');\r\n  option = $.extend({\r\n    name: 'common/header',\r\n    getData: function() {\r\n      return m_config.getConfigSync()\r\n    },\r\n    template: '  <div class=\"container\">' +\r\n      '    <div class=\"navbar-header\">' +\r\n      '      <button class=\"navbar-toggle\" type=\"button\" data-toggle=\"collapse\" data-target=\".bs-navbar-collapse\">' +\r\n      '        <span class=\"sr-only\">Toggle navigation</span>' +\r\n      '        <span class=\"icon-bar\"></span>' +\r\n      '        <span class=\"icon-bar\"></span>' +\r\n      '        <span class=\"icon-bar\"></span>' +\r\n      '      </button>' +\r\n      '      <a data-on=\"?m=go\" data-url=\"<%=CONFIG.getIndex()%>\" class=\"logo-link\" style=\"padding: 12px;\"><%-obj.logoTitle%></a>' +\r\n      '    </div>' +\r\n      '    <nav class=\"collapse navbar-collapse bs-navbar-collapse\" role=\"navigation\">' +\r\n      '      <div class=\"navbar-form navbar-right\" data-on=\"?m=navigator_search\"></div>'+\r\n      '      <ul class=\"nav navbar-nav\"><%(obj.nav || []).forEach(function(o){%>' +\r\n      '        <li class=\"<%=location.hash==o[1] ? \"active\" : \"\"%>\"><a data-on=\"?m=replaceHash\" data-url=\"<%=o[1]%>\"><%-o[0]%></a></li>' +\r\n      '        <%})%>' +\r\n      '      </ul>' +\r\n      '    </nav>' +\r\n      '  </div>'\r\n  }, option);\r\n  return viewHeader.setView(option);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/card/common/navigator.js","const c_footer = require('card/common/footer');\r\nconst c_mainContainer = require('card/common/main_container');\r\nconst m_article = require('model/article');\r\nconst m_initOption = require('helper/init_option');\r\nconst c_pannel = require('card/blog/pannel');\r\nconst c_pannelList = require('card/blog/pannel_list');\r\nconst c_articleList = require('card/blog/article_list');\r\n\r\n\r\n\r\nmodule.exports = function (page, key) {\r\n  let viewBody = c_mainContainer();\r\n  let viewTop;\r\n  let viewList = viewBody.find('[data-selector=\"main\"]');\r\n  let viewPannelList = c_pannelList(viewBody.find('[data-selector=\"panel\"]'));\r\n  viewList.setView(c_articleList());\r\n  viewBody.addView(viewPannelList);\r\n\r\n  let viewFoot = c_footer();\r\n  let currentHash;\r\n  page.setView({\r\n    start: function (hasRender) {\r\n      if (hasRender && currentHash == location.hash && BCD.history.getCode() == -1) {\r\n        return m_initOption.notRender(hasRender);\r\n      }\r\n      currentHash = location.hash;\r\n      viewList.empty();\r\n      if (key == 'index') {\r\n        m_article.getListByTag(0, BCD.getHash(1)).then((data) => {\r\n          data.title = \"最新文章\";\r\n          data.hrefHead = '#!/index';\r\n          viewList.reset(data);\r\n        });\r\n      } else if (key == 'tag') {\r\n        let tag = BCD.getHash(1);\r\n        m_article.getListByTag(tag, BCD.getHash(2)).then((data) => {\r\n          data.title = '\"' + tag + '\" 的最新文章';\r\n          data.hrefHead = '#!/tag/' + tag;\r\n          viewList.reset(data);\r\n        });\r\n      } else if (m_article.hasCatalog(key)) {\r\n        let pageNum = parseInt(BCD.getHash(1) || 0);\r\n        if (pageNum === 0) {\r\n          if (viewTop) {\r\n            viewTop.show();\r\n          } else {\r\n            viewTop = c_pannel().reset({\r\n              isInline: true,\r\n              list: m_article.getChildCatalog(key).map(o => {\r\n                return {\r\n                  href: o.href,\r\n                  title: o.title\r\n                }\r\n              })\r\n            });\r\n          }\r\n          viewList.parent().prepend(viewTop);\r\n          //console.log('getChildCatalog', key, m_article.getChildCatalog(key));\r\n        } else if (viewTop) {\r\n          viewTop.hide();\r\n        }\r\n        m_article.getListByCatalog(key, pageNum).then((data) => {\r\n          data.title = '\"' + data.tag.replace(/^[^/]+\\//, '') + '\" 的最新文章';\r\n          data.hrefHead = '#!/' + BCD.getHash(0);\r\n          viewList.reset(data);\r\n        });\r\n      }\r\n    },\r\n    title: '文章列表',\r\n    viewList: [viewBody, viewFoot]\r\n  })\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/page/list.js"," //页脚\r\nconst m_config = require('model/config');\r\nmodule.exports = function(option) {\r\n  let viewHeader = $('<footer></footer>');\r\n  option = $.extend({\r\n    name: 'common/footer',\r\n    getData: function() {\r\n      return m_config.getConfigSync()\r\n    },\r\n    template:\r\n        '<div class=\"container\">'+\r\n        '  <hr>'+\r\n        '  <p class=\"text-center\">Copyright <%-obj.author%> © <%=new Date().getFullYear()%>. All rights reserved.</p>'+\r\n        '</div>'\r\n  }, option);\r\n  return viewHeader.setView(option);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/card/common/footer.js","module.exports = ()=> $('<div class=\"container\">' +\r\n  '  <div class=\"row\">' +\r\n  '    <div class=\"col-sm-7 col-md-8 col-lg-8\">'+\r\n  '     <div data-selector=\"main\"></div></div>' +\r\n  '    <div class=\"col-sm-5 col-md-4 col-lg-4\" data-selector=\"panel\"></div>' +\r\n  '  </div>' +\r\n  '</div>');\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/card/common/main_container.js","function anchorBack() {\r\n    if (history.state && history.state.scrollY) { //支持锚点返回\r\n        if (BCD.history.getCode() == -1) {\r\n            scrollTo(0, history.state.scrollY);\r\n        }\r\n        BCD.extendState({ //保证刷新可回到头部\r\n            scrollY: 0\r\n        });\r\n    }\r\n}\r\n\r\n//带锚点返回，不reset子view\r\nfunction notRender(hasRender) {\r\n    if (hasRender) {\r\n        BCD.getPage().show();\r\n        anchorBack();\r\n        return 'show';\r\n    }\r\n}\r\nmodule.exports = {\r\n    notRender,\r\n    anchorBack\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/helper/init_option.js"," //顶部导航\r\nmodule.exports = function(option) {\r\n  let view = $('<div class=\"panel panel-primary\"></div>');\r\n  option = $.extend({\r\n    name: 'blog/panel',\r\n    template:\r\n      '<%if(obj.title){%><div class=\"panel-heading\">' +\r\n      '  <h4><%-obj.title%></h4>' +\r\n      '</div><%}%>' +\r\n      '<div class=\"panel-body\">' +\r\n      '  <%if(obj.isInline){%>' +\r\n      '    <ul class=\"list-inline\">'+\r\n      '     <%(obj.list || []).forEach(function(o){%>' +\r\n      '      <%if(o.href){%>'+\r\n      '       <li><a data-on=\"?m=go\" data-url=\"<%=o.href%>\"><%=o.title%></a></li>'+\r\n      '      <%}else{%>'+\r\n      '       <li><a data-on=\"?m=go\" data-url=\"#!/tag/<%=o%>\"><%=o%></a></li>'+\r\n      '      <%}%>' +\r\n      '     <%})%>'+\r\n      '    </ul>' +\r\n      '  <%}else{%>' +\r\n      '    <ul class=\"list-group\">' +\r\n      '     <%(obj.list || []).forEach(function(o){%>' +\r\n      '      <li class=\"list-group-item\"><a data-on=\"?m=go\" data-url=\"<%=o.href%>\"><%=o.title%></a>'+\r\n      '       <%=o.time ? \"<span style=\\\\\\\"color: #a2a34f;\\\\\\\">(\"+o.time+\")</span>\" : \"\"%></li>' +\r\n      '     <%})%>'+\r\n      '    </ul>' +\r\n      '    <%}%>' +\r\n      '</div>',\r\n    end: function(data){\r\n      if(!(data && data.list && data.list.length)){\r\n        this.hide();\r\n        return 'hide';\r\n      }\r\n    }\r\n  }, option);\r\n  return view.setView(option);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/card/blog/pannel.js","const m_article = require('model/article');\r\nconst m_recommend = require('helper/recommend');\r\nconst c_pannel = require('card/blog/pannel');\r\nmodule.exports = (view) => {\r\n  let viewPannelBook = c_pannel({\r\n    data: {\r\n      title: '书籍',\r\n      list: m_article.getBooks().map(o => {\r\n        return {\r\n          href: o.href,\r\n          title: o.title,\r\n          time: o.time\r\n        }\r\n      })\r\n    }\r\n  });\r\n  let viewPannelCatalog = c_pannel({\r\n    data: {\r\n      title: '分类',\r\n      list: m_article.getCatalogs().filter(o => o.tagList.length === 1).map(o => {\r\n        return {\r\n          title: o.title,\r\n          href: o.href\r\n        }\r\n      })\r\n    }\r\n  });\r\n  let viewPannelTag = c_pannel({\r\n    data: {\r\n      isInline: true,\r\n      title: '标签',\r\n      list: m_article.getTags()\r\n    }\r\n  });\r\n\r\n  let viewPannelRecommendPost = c_pannel({\r\n    delay: true\r\n  });\r\n  m_recommend.getRecommend(function(list){\r\n    viewPannelRecommendPost.reset({\r\n      title: '推荐阅读',\r\n      list: list.map(o => {\r\n        return {\r\n          href: o.href,\r\n          title: o.title,\r\n          time: o.time\r\n        }\r\n      })\r\n    });\r\n  });\r\n\r\n  return view.setView({\r\n    viewList: [viewPannelBook, viewPannelCatalog, viewPannelTag, viewPannelRecommendPost]\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/card/blog/pannel_list.js","const m_util = require('common/util');\r\nconst m_article = require('model/article');\r\nconst m_search = require('helper/search');\r\nconst m_readHistory = require('model/read_history');\r\n\r\nconst filter = (list) => {\r\n  let arr = [];\r\n  let itemSet = new Set(list);\r\n  let uniqList = [...itemSet];\r\n  let currentPath = decodeURIComponent(location.hash.replace('#!/', ''));\r\n  uniqList.some(function (o) {\r\n    if (!m_readHistory.hasRead(o.path) && o.path != currentPath) {\r\n      arr.push(o);\r\n      if (arr.length > 10) {\r\n        return true;\r\n      }\r\n    }\r\n  });\r\n  return arr;\r\n};\r\n\r\nconst getCorrelation = (a_tfList) => {\r\n  let tfDict = {};\r\n  a_tfList.forEach(o => {\r\n    tfDict[o.token] = o.frequency;\r\n  });\r\n  return (b_tfList) => {\r\n    let total = b_tfList.reduce((sum, item) => sum += item.frequency, 0);\r\n    return b_tfList.reduce((weight, item) => {\r\n      weight += (tfDict[item.token] || 0) * item.frequency / total;\r\n      return weight;\r\n    }, 0);\r\n  };\r\n};\r\n\r\nconst getSimilarArticles = (a_tfList) => {\r\n  let list = m_article.getArticleList().filter(o => o.tfList && o.tfList.length);\r\n  let calModel = getCorrelation(a_tfList);\r\n  let weightList = list.map(o => {\r\n    return {\r\n      article: o,\r\n      weight: calModel(o.tfList)\r\n    }\r\n  }).sort((a, b) => b.weight - a.weight);\r\n  console.table(weightList.slice(0, 20).map(o => {\r\n    return {\r\n      title: o.article.title,\r\n      weight: o.weight\r\n    }\r\n  }));\r\n  return weightList.map(o => o.article);\r\n}\r\n\r\nconst getMutiSamples = () => {\r\n  let tagDict = {};\r\n  let retList = [];\r\n  let originList = m_article.getArticleList();\r\n  let list = originList.filter(o => !m_readHistory.hasRead(o.path));\r\n  if (list.some(o => {\r\n      let tagList = o.tagList || [];\r\n      let tagName = tagList[tagList.length - 1];\r\n      if (tagDict[tagName]) {\r\n        tagDict[tagName].push(o);\r\n      } else {\r\n        tagDict[tagName] = [];\r\n        retList.push(o);\r\n      }\r\n      if (retList.length == 10) {\r\n        return true;\r\n      }\r\n    })) {\r\n    return retList;\r\n  } else {\r\n    let tagList = Object.keys(tagDict);\r\n    for (var i = 0; i < 10; i++) {\r\n      for (var j = 0; j < tagList.length; j++) {\r\n        let item;\r\n        let tagName = tagList[j];\r\n        if (item = tagDict[tagName][i]) {\r\n          retList.push(item);\r\n          if (retList.length == 10) {\r\n            return retList;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return retList.concat(originList.slice(0, 10 - retList.length));\r\n}\r\n\r\n\r\n\r\nconst getRecommend = (callback) => {\r\n  let delayTime = 2E3 - (m_util.now() - m_article.startTime);\r\n  delayTime = m_article.isPreload ? 0 : (delayTime < 0 ? 0 : delayTime);\r\n  setTimeout(function () {\r\n    let key = decodeURIComponent(BCD.getHash(0));\r\n    let articleList = getMutiSamples();\r\n\r\n    switch (true) {\r\n    case key == 'tag':\r\n      let word = decodeURIComponent(BCD.getHash(1));\r\n      m_article.searchList(word, (list) => {\r\n        callback(filter(list.concat(articleList)));\r\n      }, true);\r\n      break;\r\n    case m_article.hasArticle(key):\r\n      m_article.getArticleContent(key).then((data) => {\r\n        let tagList = data.tagList;\r\n        let keyWords = (data.tfList || []).slice(0, 10).map(o => o.token);\r\n        console.log('本文关键词为：', keyWords.join(','));\r\n        callback(filter(getSimilarArticles(data.tfList).concat(articleList)));\r\n      });\r\n      break;\r\n    case m_article.hasCatalog(key):\r\n      m_article.getListByCatalog(key, 0, 999).then((data) => {\r\n        //在目录列表中已经有当前目录文章的展示了，在这里优先展示搜索到的内容\r\n        let catalog = m_article.getCatalogMessage(key);\r\n        let alist = data.list || [];\r\n        m_article.searchList(catalog.tagList.join(' '), (list) => {\r\n          callback(filter(list.concat(alist.concat(articleList))));\r\n        }, true);\r\n      });\r\n      break;\r\n\r\n    default:\r\n      callback(articleList);\r\n      break;\r\n    }\r\n  }, delayTime);\r\n\r\n};\r\nmodule.exports = {\r\n  getRecommend\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/helper/recommend.js","const m_config = require('model/config');\r\nconst m_article = require('model/article');\r\nlet storageKey = 'read_history';\r\nlet readHistory = {};\r\nconst init = ()=> {\r\n  try{\r\n    readHistory = $.extend({}, JSON.parse(localStorage.getItem(storageKey)), readHistory);\r\n  }catch(e){}\r\n};\r\n\r\nm_config.getConfig.then(()=>{\r\n  storageKey = 'read_history_' + m_config.username;\r\n  init();\r\n})\r\n\r\nconst addHistory = (path)=>{\r\n  readHistory[path] = Date.now();\r\n  localStorage.setItem(storageKey, JSON.stringify(readHistory));\r\n};\r\n\r\n\r\nmodule.exports = {\r\n  addHistory,\r\n  hasRead: (path)=> !!readHistory[path],\r\n  getReadTime: (path)=> readHistory[path]\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/model/read_history.js"," //文章列表\r\nmodule.exports = function(option) {\r\n  return $.extend({\r\n    name: 'blog/article_list',\r\n    template: '<h3><%=obj.title%></h3>' +\r\n      '<%if(!(obj.list && obj.list.length)){%>'+\r\n      '<br><hr><center><h3>暂无内容</h3></center>'+\r\n      '<%}else{(obj.list || []).forEach(function(o, idx){%><article>' +\r\n      '  <h2><a data-on=\"?m=go\" data-url=\"<%=o.href%>\"><%-o.title%></a></h2>' +\r\n      '  <div class=\"row\">' +\r\n      '    <div class=\"group1 col-sm-6 col-md-6\">' +\r\n      '      <span class=\"glyphicon glyphicon-folder-open\"></span><%(o.tagList||[]).forEach(function(item, i, arr){%>'+\r\n      '       <%=i ? \"&nbsp;>&nbsp;\" : \"&nbsp;\"%><a data-on=\"?m=go\" '+\r\n      '       data-url=\"#!/<%=encodeURIComponent([\"blog\"].concat(arr.slice(0, i+1)).join(\"/\"))%>\"><%=item%></a><%})%>' +\r\n      '    </div>' +\r\n      '    <div class=\"group2 col-sm-6 col-md-6\">' +\r\n      '      <span class=\"glyphicon glyphicon-time\"></span>&nbsp;<%-o.time%>' +\r\n      '    </div>' +\r\n      '  </div>' +\r\n      '  <hr>' +\r\n      '  <div data-on=\"?m=mkview&idx=<%=idx%>\">'+\r\n      '  </div><br />' +\r\n      '' +\r\n      '  <p class=\"text-right\">' +\r\n      '    <a data-on=\"?m=go\" data-url=\"<%=o.href%>\">' +\r\n      '      continue reading...' +\r\n      '    </a>' +\r\n      '  </p>' +\r\n      '  <hr>' +\r\n      '</article><%})%>' +\r\n      '' +\r\n      '<ul class=\"pager\">' +\r\n      '  <li class=\"previous\"><a <%if(obj.page==0){%>style=\"opacity: 0.5;\"<%}else{%>'+\r\n      'data-on=\"?m=go\" data-url=\"<%=obj.hrefHead+\"/\"+(obj.page-1)%>\"<%}%>>&larr; Previous</a></li>' +\r\n      '  <li class=\"next\"><a <%if(obj.page==Math.floor(obj.num/obj.count)){%>style=\"opacity: 0.5;\"<%}else{%>'+\r\n      'data-on=\"?m=go\" data-url=\"<%=obj.hrefHead+\"/\"+(obj.page+1)%>\"<%}%>>Next &rarr;</a></li>' +\r\n      '</ul><%}%>'\r\n  }, option);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/card/blog/article_list.js","const s_mainContainer = require('card/common/slidebar_container');\r\nconst m_article = require('model/article');\r\nconst m_readHistory = require('model/read_history');\r\nconst c_articleList = require('card/blog/article_list');\r\n\r\n\r\n\r\nmodule.exports = function (page, key) {\r\n  page.html(s_mainContainer);\r\n  let viewContent = page.find('[data-selector=\"main\"]');\r\n  let viewSlidebar = page.find('[data-selector=\"slidebar\"]');\r\n  let slidebar;\r\n  let currentHash;\r\n  viewSlidebar.setView({\r\n    name: 'blog/slidebar',\r\n    template: '<div data-on=\"?m=mkview\"></div>'\r\n  });\r\n\r\n  viewContent.setView({\r\n    name: 'blog/blog',\r\n    template: '<div data-on=\"?m=mkview\"></div>'\r\n  });\r\n\r\n\r\n  page.setView({\r\n    title: m_article.getName(key),\r\n    start: function () {\r\n      if (currentHash !== location.hash) {\r\n        viewContent.empty();\r\n        currentHash = location.hash;\r\n      }\r\n      this.show();\r\n      m_article.getArticleContent(m_article.getSidebarPath(key)).then((data) => {\r\n        let baseHash = '#!/' + BCD.getHash(0);\r\n        if (!slidebar) {\r\n          slidebar = $.extend({}, data);\r\n          let content = slidebar.content || '';\r\n          let chapters = slidebar.chapters = [];\r\n\r\n          slidebar.content = content.replace(/<%(([^>]|[^%]>)+)%>/g, function ($0, $1) {\r\n            let item = {};\r\n            let fileName = '';\r\n            if ($1.indexOf(']')>0) { //这种格式：[描述](相对与当前目录的地址)\r\n              let arr = $1.substr(1, $1.length - 2).split(/\\]\\s*\\(/);\r\n              item.title = arr[0] || '';\r\n              item.href  = baseHash + '/' + (arr[1] || '');\r\n              fileName = arr[1];\r\n            } else {\r\n              item.title = $1;\r\n              item.href = baseHash + '/' + $1 + '.md';\r\n              fileName = $1 + '.md';\r\n            }\r\n            item.path = key+'/'+fileName;\r\n            if(m_article.hasArticle(item.path)){\r\n              chapters.push(item);\r\n            }\r\n            return '<a data-on=\"?m=replaceHash\" data-url=\"' + item.href + '\">' + item.title + '</a>'+\r\n            '<span data-path=\"'+item.path+'\" class=\"icon glyphicon glyphicon-ok\" aria-hidden=\"true\" '+\r\n            'style=\"'+(m_readHistory.hasRead(item.path) ? '' : 'display:none')+'\"></span>';\r\n          });\r\n          viewSlidebar.reset(slidebar);\r\n          setTimeout(function () {\r\n            viewSlidebar.bindEvent();\r\n          });\r\n        }\r\n        let fileName = key + location.hash.replace(baseHash, '');\r\n        if (m_article.hasArticle(fileName)) {\r\n          m_article.getArticleContent(fileName).then((data) => {\r\n            m_readHistory.addHistory(fileName);\r\n            $(viewSlidebar.find('.active')).removeClass('active');\r\n            let currentDom = $('.slidebar [data-path=\"'+fileName+'\"]');\r\n            currentDom.parent().addClass('active');\r\n            currentDom.show();\r\n            viewContent.reset(data);\r\n          });\r\n        } else if (slidebar.chapters[0]) {\r\n          return BCD.replaceHash(slidebar.chapters[0].href);\r\n        } else {\r\n          viewContent.reset({\r\n            content: '敬请期待',\r\n            title: fileName\r\n          });\r\n        }\r\n      });\r\n    }\r\n  })\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/page/book.js","module.exports = \r\n  '  <div class=\"row\">' +\r\n  '    <div class=\"slidebar col-sm-5 col-md-4 col-lg-3\" data-selector=\"slidebar\"></div>' +\r\n  '    <div class=\"col-sm-offset-5 col-md-offset-4 col-lg-offset-3 col-sm-7 col-md-8 col-lg-9\" data-selector=\"main\"></div>' +\r\n  '  </div>';\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/card/common/slidebar_container.js","//有侧边栏的内容展示\r\n\r\nconst c_mainContainer = require('card/common/main_container');\r\nconst c_footer = require('card/common/footer');\r\nconst m_article = require('model/article');\r\nconst m_readHistory = require('model/read_history');\r\nconst c_pannelList = require('card/blog/pannel_list');\r\nconst c_content = require('card/blog/content');\r\nconst m_initOption = require('helper/init_option');\r\n\r\n\r\n\r\nmodule.exports = function(page, key) {\r\n  let viewBody = c_mainContainer();\r\n  let viewContent = viewBody.find('[data-selector=\"main\"]');\r\n  let viewPannelList = c_pannelList(viewBody.find('[data-selector=\"panel\"]'));\r\n  viewContent.setView(c_content({\r\n    delay: true\r\n  }));\r\n  viewBody.addView(viewContent);\r\n  viewBody.addView(viewPannelList);\r\n\r\n  let viewFoot = c_footer();\r\n  page.setView({\r\n    start: function(hasRender){\r\n      if(hasRender){\r\n        return m_initOption.notRender(hasRender);\r\n      }\r\n      if(m_article.hasArticle(key)){\r\n        m_article.getArticleContent(key).then((data)=>{\r\n          m_readHistory.addHistory(key);\r\n          page.setView({title: data.title});\r\n          document.title = data.title;\r\n          viewContent.reset(data);\r\n        });\r\n      }\r\n    },\r\n    viewList: [viewBody, viewFoot]\r\n  })\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/page/content.js","window.CONFIG = require('model/config')\r\n//单个文章\r\nmodule.exports = function (option) {\r\n  return $.extend({\r\n    name: 'blog/content',\r\n    template:\r\n      '<h1><%=obj.title%></h1>' +\r\n      '  <div class=\"row\">' +\r\n      '    <div class=\"group1 col-sm-6 col-md-6\">' +\r\n      '      <span class=\"glyphicon glyphicon-folder-open\"></span><%(obj.tagList||[]).forEach(function(item, i, arr){%>'+\r\n      '       <%=i ? \"&nbsp;>&nbsp;\" : \"&nbsp;\"%><a data-on=\"?m=go\" '+\r\n      '       data-url=\"#!/<%=encodeURIComponent([\"blog\"].concat(arr.slice(0, i+1)).join(\"/\"))%>\"><%=item%></a><%})%>' +\r\n      '    </div>' +\r\n      '    <div class=\"group2 col-sm-6 col-md-6\">' +\r\n      '      <span class=\"glyphicon glyphicon-time\"></span>&nbsp;<%-obj.time%>' +\r\n      '    </div>' +\r\n      '  </div>' +\r\n      '  <hr>' +\r\n      '  <div data-on=\"?m=mkview\">' +\r\n      '  </div><br />' +\r\n      '  <hr>' +\r\n      '</article>' +\r\n      '<ul class=\"pager\">' +\r\n      '  <li class=\"previous\"><a data-on=\"?m=back\">← 返回</a></li>' +\r\n      ' <li><a target=\"_blank\" rel=\"noopener\" href=\"<%=CONFIG.getSearchIssueURL(obj.title)%>\">查看评论</a></li>' +\r\n      ' <li class=\"next\"><a target=\"_blank\" rel=\"noopener\" href=\"<%=CONFIG.getNewIssueURL(obj.title)%>\">去评论 &rarr;</a></li>' +\r\n      '</ul>'\r\n  }, option);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/card/blog/content.js","//针对导航的，没有侧边栏的内容展示\r\n\r\nconst c_mainContainer = require('card/common/main_container');\r\nconst c_footer = require('card/common/footer');\r\nconst m_config = require('model/config');\r\nconst m_article = require('model/article');\r\nconst m_initOption = require('helper/init_option');\r\n\r\n\r\n\r\nmodule.exports = function(page) {\r\n  let viewBody = $('<div class=\"container\" style=\"min-height:'+((window.innerHeight||640) -200)+'px\"/>').setView({\r\n   name: 'blog/blog',\r\n   delay: true,\r\n   template: '<div data-on=\"?m=mkview\"></div>'\r\n });\r\n\r\n  let viewFoot = c_footer();\r\n  page.setView({\r\n    start: function(hasRender){\r\n      if(hasRender && BCD.history.getCode()==-1){\r\n        return m_initOption.notRender(hasRender);\r\n      }\r\n      let key = location.hash.replace('#!/', '');\r\n      if(m_article.hasArticle(key)){\r\n        m_article.getArticleContent(key).then((data)=>{\r\n          page.setView({title: data.title});\r\n          document.title = data.title;\r\n          viewBody.reset(data);\r\n        });\r\n      }else{\r\n        BCD.replaceHash(m_config.getIndex());\r\n      }\r\n    },\r\n    viewList: [viewBody, viewFoot]\r\n  })\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/page/blog.js","const c_footer = require('card/common/footer');\r\nconst c_mainContainer = require('card/common/main_container');\r\nconst m_initOption = require('helper/init_option');\r\nconst c_pannelList = require('card/blog/pannel_list');\r\nconst m_pullArticle = require('card/blog/pull_article');\r\n\r\nmodule.exports = function (page, key) {\r\n  let viewBody = c_mainContainer();\r\n  let viewList = viewBody.find('[data-selector=\"main\"]');\r\n  let viewPannelList = c_pannelList(viewBody.find('[data-selector=\"panel\"]'));\r\n  viewList.setView({\r\n    viewList: [m_pullArticle.container]\r\n  });\r\n\r\n  viewBody.addView(viewList);\r\n  viewBody.addView(viewPannelList);\r\n\r\n  let viewFoot = c_footer();\r\n  let oldWord = '';\r\n  page.setView({\r\n    start: function (hasRender) {\r\n      let word = decodeURIComponent(BCD.getHash(1));\r\n      if (hasRender && oldWord == word) {\r\n        return m_initOption.notRender(true);\r\n      }\r\n      oldWord = word;\r\n      m_pullArticle.init(word);\r\n    },\r\n    title: '搜索结果',\r\n    viewList: [viewBody, viewFoot]\r\n  })\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/page/search.js","/**\r\n * 不断增加的列表\r\n */\r\nconst m_article = require('model/article');\r\nvar container = $('<div style=\"display:none;\">' +\r\n  '<div data-selector=\"tips\" style=\"margin: 20px;font-size: 20px;\"></div>' +\r\n  '<div data-selector=\"pull_list\"></div>' +\r\n  '</div>');\r\n\r\nvar viewRank = $(container.find('[data-selector=\"pull_list\"]'));\r\nvar viewTips = $(container.find('[data-selector=\"tips\"]'));\r\n\r\nviewRank.setView({\r\n  full: 'append',\r\n  template: '<%(obj.list || []).forEach(function(o, idx, list){%><article>' +\r\n    '  <h2><a data-on=\"?m=go\" data-url=\"<%=o.href%>\"><%=o.title%></a></h2>' +\r\n    '  <div class=\"row\">' +\r\n    '    <div class=\"group1 col-sm-6 col-md-6\">' +\r\n    '      <span class=\"glyphicon glyphicon-folder-open\"></span><%(o.tagList||[]).forEach(function(item, i, arr){%>' +\r\n    '       <%=i ? \"&nbsp;>&nbsp;\" : \"&nbsp;\"%><a data-on=\"?m=go\" ' +\r\n    '       data-url=\"#!/<%=encodeURIComponent([\"blog\"].concat(arr.slice(0, i+1)).join(\"/\"))%>\"><%=item%></a><%})%>' +\r\n    '    </div>' +\r\n    '    <div class=\"group2 col-sm-6 col-md-6\">' +\r\n    '      <span class=\"glyphicon glyphicon-time\"></span>&nbsp;<%-o.time%>' +\r\n    '    </div>' +\r\n    '  </div>' +\r\n    '  <hr>' +\r\n    '  <div data-on=\"?m=mkview&idx=<%=idx%>\">' +\r\n    '  </div><br />' +\r\n    '  <p class=\"text-right\">' +\r\n    '    <a data-on=\"?m=go\" data-url=\"<%=o.href%>\">' +\r\n    '      continue reading...' +\r\n    '    </a>' +\r\n    '  </p>' +\r\n    '  <%if(idx<list.length-1)print(\"<hr>\")%>' +\r\n    '</article><%})%>'\r\n});\r\n\r\n\r\nmodule.exports = {\r\n  container,\r\n  init: (word) => {\r\n    let count = 0;\r\n    let processCount = 0;\r\n    let keyWord = '<span class=\"text-danger\">' + word + '</span>'\r\n    viewTips.html('正在搜索：' + keyWord);\r\n    viewRank.empty();\r\n    m_article.searchList(word, function (data) {\r\n      viewRank.reset(data);\r\n      count += data.list && data.list.length || 0;\r\n      processCount += data.checkNum;\r\n      if (processCount < data.totalNum) {\r\n        viewTips.html('在(' + processCount + '/' + data.totalNum + ')搜索到' +\r\n          count + '篇关于：' + keyWord);\r\n      } else {\r\n        viewTips.html('在' + data.totalNum + '篇文章中搜索到' +\r\n          count + '篇关于：' + keyWord);\r\n      }\r\n\r\n      //console.log(data);\r\n    });\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./source/src/card/blog/pull_article.js"],"sourceRoot":""}